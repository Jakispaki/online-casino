<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <title>Organizer</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">

    <style>
      body { background-color: #8d00a2; }
      .todo-list { margin-top: 30px; list-style: none; padding: 0; }
      .todo-item {
        position: relative; background: #fff;
        padding: 16px 20px 12px 20px; margin-bottom: 16px; border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.06); line-height: 1.5;
      }
      .todo-content { font-weight: 600; }
      .todo-date { display: block; color: #ae0000; font-size: 0.9em; margin-top: 6px; }
      .todo-form { margin-top: 28px; background: #51ff00; padding: 16px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
      .todo-item { display: block; }
      .todo-complete-form {
        display: flex;
        align-items: center;
        gap: 20px;
        margin: 0; padding: 0; border: 0; background: transparent;
      }
      .todo-checkbox {
        width: 20px; height: 20px; margin: 0;
        accent-color: #785cb8;
      }
      .todo-content { font-weight: 600; flex: 1; }
      .navbar-brand { font-weight: 600; }
      .lang-select {
        background: #0b1122;
        border: 1px solid #28314e;
        color: #cdd2e2;
        padding: 6px 10px;
        border-radius: 10px;
        margin-top: 8px;
      }
    </style>
  </head>

<body>  
    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
            data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Navigation umschalten</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Online-Casino</a>
        </div>

        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">

            {% if current_user.is_authenticated %}
              <li><a data-i18n="nav.blackjack" href="{{ url_for('blackjack') }}">Blackjack</a></li>
              <li><a data-i18n="nav.roulette" href="{{ url_for('roulette') }}">Roulette</a></li>
              <li><a data-i18n="nav.deposit" href="{{ url_for('deposit') }}">Deposit</a></li>
              <li><a data-i18n="nav.stats" href="{{ url_for('stats') }}">Statistics</a></li>
              <li><a data-i18n="nav.settings" href="{{ url_for('settings') }}">Settings</a></li>
              <li><a data-i18n="nav.help" href="{{ url_for('help_page') }}">Help</a></li>
              <li><a data-i18n="nav.logout" href="{{ url_for('logout') }}">Logout</a></li>

            {% else %}
              <li><a data-i18n="nav.login" href="{{ url_for('login') }}">Login</a></li>
              <li><a data-i18n="nav.register" href="{{ url_for('register') }}">Register</a></li>
              <li><a data-i18n="nav.help" href="{{ url_for('help_page') }}">Help</a></li>

            {% endif %}
            <li>
              <select class="lang-select" id="lang-select" aria-label="Language">
                <option value="en">EN</option>
                <option value="de">DE</option>
                <option value="es">ES</option>
              </select>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
        {% block content %}{% endblock %}
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>
      const translations = {
        en: {
          'nav.blackjack': 'Blackjack',
          'nav.roulette': 'Roulette',
          'nav.deposit': 'Deposit',
          'nav.stats': 'Statistics',
          'nav.settings': 'Settings',
          'nav.help': 'Help',
          'nav.logout': 'Logout',
          'nav.login': 'Login',
          'nav.register': 'Register'
        },
        de: {
          'nav.blackjack': 'Blackjack',
          'nav.roulette': 'Roulette',
          'nav.deposit': 'Einzahlen',
          'nav.stats': 'Statistiken',
          'nav.settings': 'Einstellungen',
          'nav.help': 'Hilfe',
          'nav.logout': 'Logout',
          'nav.login': 'Login',
          'nav.register': 'Registrieren'
        },
        es: {
          'nav.blackjack': 'Blackjack',
          'nav.roulette': 'Ruleta',
          'nav.deposit': 'Depositar',
          'nav.stats': 'Estadisticas',
          'nav.settings': 'Ajustes',
          'nav.help': 'Ayuda',
          'nav.logout': 'Salir',
          'nav.login': 'Entrar',
          'nav.register': 'Registrarse'
        }
      };

      function applyLanguage(lang) {
        const dict = translations[lang] || translations.en;
        document.querySelectorAll('[data-i18n]').forEach((el) => {
          const key = el.getAttribute('data-i18n');
          if (dict[key]) {
            el.textContent = dict[key];
          }
        });
        localStorage.setItem('lang', lang);
      }

      const selector = document.getElementById('lang-select');
      if (selector) {
        const saved = localStorage.getItem('lang') || 'en';
        selector.value = saved;
        applyLanguage(saved);
        selector.addEventListener('change', (e) => applyLanguage(e.target.value));
      }
    </script>
  </body>
</html>